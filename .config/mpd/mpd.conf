# Resources
#  - http://www.musicpd.org/doc/user
#  - https://wiki.archlinux.org/title/Music_Player_Daemon
#  - https://ubutuhandbook.org/index.php/2025/07/install-mpd-ubuntu

# Files and directories #######################################################

# This setting sets the MPD internal playlist directory. The purpose of this
# directory is storage for playlists created by MPD. The server will use
# playlist files not created by the server but only if they are in the MPD
# format. This setting defaults to playlist saving being disabled.

playlist_directory		"~/.config/mpd/playlists"

# This setting sets the location of the MPD database. This file is used to
# load the database at server start up and store the database while the
# server is not up. This setting defaults to disabled which will allow
# MPD to accept files over ipc socket (using file:// protocol) or streaming
# files over an accepted protocol.

db_file			"~/.config/mpd/tag_cache"

# This setting sets the location of the file which contains information about
# most variables to get MPD back into the same general shape it was in before
# it was brought down. This setting is disabled by default and the server
# state will be reset on server start up.

state_file			"~/.local/state/mpd/state"

# The location of the sticker database.  This is a database which
# manages dynamic information attached to songs.

sticker_file                   "~/.config/mpd/sticker.sql"

###############################################################################


# General music daemon options ################################################

# This setting specifies the user that MPD will run as. MPD should never run as
# root and you may use this setting to make MPD change its user ID after
# initialization. This setting is disabled by default and MPD is run as the
# current user.

user				"matyama"

# This setting specifies the group that MPD will run as. If not specified
# primary group of user specified with "user" setting will be used (if set).
# This is useful if MPD needs to be a member of group such as "audio" to
# have permission to use sound card.

#group				"matyama"

# This setting sets the address for the daemon to listen on. Careful attention
# should be paid if this is assigned to anything other than the default, any.
# This setting can deny access to control of the daemon. Not effective if
# systemd socket activation is in use.

# For network
#bind_to_address			"localhost"

# For Unix Socket
#bind_to_address		"/run/user/1000/mpd/socket"
bind_to_address		"@mpd"

# Setting "restore_paused" to "yes" puts MPD into pause mode instead
# of starting playback after startup.

restore_paused "yes"

# This setting enables automatic update of MPD's database when files in
# music_directory are changed.

auto_update	"yes"

###############################################################################


# Database #######################################################################

# An example of a database section instead of the old 'db_file' setting.
# It enables mounting other storages into the music directory.

#database {
#       plugin "simple"
#       path "/var/lib/mpd/tag_cache"
#       cache_directory "/var/lib/mpd/cache"
#}

# An example of database config for a satellite setup

#music_directory "nfs://fileserver.local/srv/mp3"
#database {
#       plugin "proxy"
#       host "other.mpd.host"
#       port "6600"
#}

# Input #######################################################################

input {
        plugin "curl"
}

# Decoder #####################################################################

decoder {
        plugin                  "hybrid_dsd"
        enabled                 "no"
}

decoder {
        plugin        "wildmidi"
        enabled       "no"
}

###############################################################################

# Audio Output ################################################################

# PipeWire
audio_output {
	type		"pipewire"
	name		"PipeWire Sound Server"
}

## Visualizer
audio_output {
	type		"fifo"
	name		"mpd-fifo"
	path		"/tmp/mpd.fifo"
	format		"44100:16:2"
	auto_resample		"no"
	use_mmap		"yes"
}

###############################################################################

# Character Encoding ##########################################################

# If file or directory names do not display correctly for your locale then you
# may need to modify this setting.

filesystem_charset		"UTF-8"

###############################################################################
